<div class="fixed inset-0 bg-black z-[100] flex flex-col">
  <header class="bg-zinc-900/80 p-4 flex items-center justify-between flex-wrap gap-4">
    <div class="flex items-center gap-4">
      <button (click)="goBack()" class="text-white hover:text-red-500 transition-colors text-2xl">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h1 class="text-xl md:text-2xl font-bold text-white truncate">
        {{ details()?.title || details()?.name || 'Loading...' }}
      </h1>
    </div>
    
    @if (itemType() === 'tv' && details()) {
      <div class="flex items-center gap-4 flex-wrap">
        <div>
          <label for="season" class="text-zinc-400 mr-2">Season:</label>
          <select id="season" (change)="onSeasonChange($event)" class="bg-zinc-800 text-white rounded p-2 border border-zinc-700 focus:outline-none focus:ring-2 focus:ring-red-500">
            @for (season of validSeasons; track season.id) {
              <option [value]="season.season_number" [selected]="season.season_number === selectedSeason()">
                {{ season.name }}
              </option>
            }
          </select>
        </div>
        @if (seasonDetails()) {
          <div>
            <label for="episode" class="text-zinc-400 mr-2">Episode:</label>
            <select id="episode" (change)="onEpisodeChange($event)" class="bg-zinc-800 text-white rounded p-2 border border-zinc-700 focus:outline-none focus:ring-2 focus:ring-red-500">
              @for (episode of seasonDetails()?.episodes; track episode.id) {
                <option [value]="episode.episode_number" [selected]="episode.episode_number === selectedEpisode()">
                  E{{ episode.episode_number }} - {{ episode.name }}
                </option>
              }
            </select>
          </div>
        }
      </div>
    }
  </header>

  <main class="flex-1 bg-black flex flex-col items-center justify-center">
    @if (embedUrl()) {
      <iframe [src]="embedUrl() | safeUrl" class="w-full h-full border-0" allowfullscreen allow="autoplay; fullscreen"></iframe>
    } @else {
      <div class="text-zinc-500 text-2xl flex items-center gap-3">
        <i class="fas fa-spinner fa-spin"></i>
        <span>Loading Player...</span>
      </div>
    }
  </main>
</div>
